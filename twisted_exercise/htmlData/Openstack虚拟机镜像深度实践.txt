<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <link href="http://csdnimg.cn/public/favicon.ico" rel="GEEK ICON">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	<title>Openstack虚拟机镜像深度实践  - 极客头条  - CSDN.NET</title>
	<link rel="stylesheet" href="http://c.csdnimg.cn/public/common/toolbar/css/index.css">
	<link rel="stylesheet" href="http://c.csdnimg.cn/cdn/201502/css/font-awesome.min.css">
	<link rel="stylesheet" href="http://c.csdnimg.cn/cdn/201502/css/bootstrap.min.css">
	<!--	-->
    <link rel="stylesheet" href="/assets/css/geek.css"/>
    <link rel="stylesheet" href="/assets/css/comments.css"/>
	<script src="http://c.csdnimg.cn/cdn/201502/js/jquery-2.1.3.min.js"></script>
	<script src="http://c.csdnimg.cn/cdn/201502/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/comments.min.js?v=20150723"></script>
        <script type="text/javascript" src="/js/rails.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.pjax.js"></script>
    <script type="text/javascript" src="/assets/js/geek.js"></script>
    <script type="text/javascript" src="/assets/js/complaints.js"></script>

</head>
<body>
<!--[if gte IE 8]>
    <script src="http://c.csdnimg.cn/cdn/201502/js/jquery-1.11.2.min.js"></script>
    <div class="fuckie8"><p>我梭这位藤姿，啄为一锅极咳，用辣摸古董滴牛懒气是不对的。<br>盖绍你克<a target="_blank" href="http://www.firefox.com.cn">这里</a>下锅火府（firefox）装上嘛，蛮好用嘞。</p>
            <h5>三观正的说法：</h5>
            <h6>您当前使用的浏览器版本过低，推荐使用最新版<a target="_blank" href="http://www.firefox.com.cn">Firefox</a>或<a>Chrome</a>以获得最佳浏览体验。</h6>
    </div>
<![endif]-->
	<script id="toolbar-tpl-scriptId" prod="" skin="black" fixed="true" src="http://c.csdnimg.cn/public/common/toolbar/js/html.js"></script>
<img id="share_weixin" src="/assets/images/geek_logo.png">
	<ul class="header_mini visible-phone list-unstyled">
        <li><i class="fa fa-align-justify"></i> </li>
        <li><a href="/">极客头条</a> </li>
        <li>
            <a href="/search" title="搜索"><i class="fa fa-search"></i></a>
            <a data-target="geek_link" class="start_cmmde" title="发布链接"><i class="fa fa-link"></i></a>
            <a data-target="geek_new" class="start_cmmde" title="发布图文"><i class="fa fa-file-text-o"></i></a>
        </li>
    </ul>
    	<script type="text/javascript">var login_username = "";</script>
    <div class="left_nav_top hide_lg">
    <span class="toggle-subnav insubnav"><i class="fa fa-arrow-left"></i>返回</span>
            <a href="https://passport.csdn.net/account/login" class="visible-xs">登录</a>
        <!--<a onclick="return_old()">返回老版</a>-->
</div>
<script>
    function return_old(){
        $.get("/hackernewsv2/taste",function(data){
            if(data.succ == 1){
                window.location.href="http://geek.csdn.net/";
            }else{
                alert(data.msg);
                return false;
            }
        })
    }
</script>
<div class="left_nav hide_lg">
    <div class="scroller_box">
        <div id="leftnav_scr" class="scroller_body">
            <div class="scroller_cont">
                <!--申请创建主题-->
<!--申请创建主题弹框-->
<div class="mark mark_apply_create hide">
    <div class="popup">
        <h1><span>申请创建主题</span><span class="tips create_forum_error" ></span><i class="fa fa-close close"></i></h1>
        <div class="popup_wrap">
            <!--申请创建主题第一步未选中-->
            <div class="popup_c"  style="display: none;">
                <div class="popup_c_first">
                    <p>主题创建协议：</p>
                    <p>
					主题是聚焦特定技术文章的讨论小组，在这里，你可以与志同道合的伙伴畅所欲言。假如极客头条的读者关注或者加入了你所创建的主题，他们能在主题中发表内容，同时在自己的看板中，浏览这里的发言。主题中的精华内容，也可以为极客头条所有的用户看到。
</p>
<p>
申请创建主题之前，请先思考下面的问题：<br>
&nbsp;&nbsp;&nbsp;&nbsp;1.	创建主题之后，你是否愿意投入精力建设和管理社区？如果你尚在犹豫，或者怀疑自己的热情，可能意味着你还需要等待一段时间。<br>
&nbsp;&nbsp;&nbsp;&nbsp;2.	你是否能找到一群志趣相投的朋友？每个主题都需要一群与你相似，能与你找到共鸣的朋友。<br>
</p>
<p>
如果对上面的问题，你都有肯定的回答，那么欢迎创建主题。
					
					</p>
                    <div class="popup_c_first_b">
                        <div class="pull-left">
                            <label><input type="checkbox" class="accept" id="accept" /> 接受</label>
<!--                        	<i><input type="checkbox" class="reject"/></i><span>不接</span>-->
                        </div>
                        <div class="pull-right"><input type="button" href="javascript:;" class="next_01" id="next" value="下一步"/></div>

                    </div>
                </div>
            </div>
            <!--申请创建主题第二步-->
            <div class="popup_c" style="display: none;">

				<form class="form-horizontal create_forum_form">

                    <ul class="popup_list">
                        <li><h3 class="forum_message">主题信息（必填）</h3></li>
                        <li><label>主题名称</label><input class="input_forum_name" type="text" name="forum[name]" /></li>
                        <li class="dashed_b">
                            <div class="intro">主题描述（最多限制在50个字符）</div>
                            <textarea class="input_forum_describe" required="required" name="forum[description]"></textarea>
                        </li>
                        <li><h3>申请人信息（必填）</h3></li>
                        <li><label>姓名</label><input type="text" name="userinfo[name]" value="" /></li>
                        <li><label>公司</label><input type="text" name="userinfo[company]" value="" /> </li>
                        <li><label>职位</label><input type="text" required="required" name="userinfo[job]" value="" /> </li>
                        <li><label>邮箱</label><input type="email" required="required" name="userinfo[email]" value="" /> </li>
                        <li><label>手机号</label><input type="tel" required="required" name="userinfo[mobile]" value="" /> </li>

                    </ul>
                    <div class="submit_b"><button class="submit create_forum_submit">提交</button></div>
                </form>
            </div>
            <!--申请创建主题第三步-->
            <div class="popup_c" style="display: none;">
                <div class="popup_c_third">
                    <p>申请信息已提交审核，请注意查收邮件，我们会尽快给您反馈。</p>
                    <p>如有疑问，请联系<a href="mailto:geek@csdn.net">geek@csdn.net</a></p>
                </div>
            </div>
        </div>

    </div>
</div>

<script type="text/javascript">
    $(function()
    {
        //取消背景层的滚动条滚动样式
        /*$(document).css(
            {"overflow":"none","overflow":"hidden","_overflow":"hidden","padding":"0 17px 0 0"}
        );*/

        $('#accept').removeAttr('checked');
        
        //申请创建主题弹框
        $('body').delegate('.apply_CreatF', 'click', function()
        {
            var login_username = '';
            var cookie = document.cookie.split(";");
            for (var i in cookie){
                var val = cookie[i];
				var tmp = val.split('=');
				if (tmp[0].trim() == 'UserName'){
					login_username = tmp[1];
				}
            }
        	if (login_username == ''){
				location.href = "https://passport.csdn.net/account/login";
            }
        	$(".mark_apply_create").appendTo('body').removeClass("hide").fadeIn(100);
        	$(".mark_apply_create").find(".popup_c:eq(0)").show().siblings().hide();

        });

        $("body").delegate('#accept', 'click', function()
        {
            checkState();
            document.documentElement.style.cssText = 'overflow:none;+overflow:hidden;_overflow:hidden;';
            document.body.style.cssText = 'overflow:hidden;+overflow:none;_overflow:none;padding:0 17px 0 0;';
        });

        //提交创建主题
        $('body').delegate('.create_forum_submit', 'click', function(){
            var tel = $(".popup_list input[type='tel']").val();
            if($('.input_forum_name').val().trim() == ""){
                $('.create_forum_error').html('请填写主题名称').show();
                $('.input_forum_name').focus();
            }else if($('.input_forum_describe').val().trim() == ""){
                $('.create_forum_error').html('请填写主题描述').show();
                $('.input_forum_describe').focus();
            //}else if(/^13\d{9}$/g.test(tel)||(/^15[8,9]\d{8}$/g.test(tel)||(/^15[8,9]\d{8}$/g.test(tel))
            }else if(/^1[3||5||8]\d{9}$/g.test(tel))
            {
                $(this).attr("disabled", "disabled");
                var data = $('.create_forum_form').serialize();
                $.post("/forum/create", data, function(result){
                    if(result.status){
                        $('.create_forum_error').hide();
                        $(".mark_apply_create").find(".popup_c:eq(2)").show().siblings().hide();
                    } else{
                        $('.create_forum_submit').attr("disabled", false);
                        $('.create_forum_error').html(result.error).show();
                    }
                });
            }
            else
            {
                $('.create_forum_error').html('请填写正确的手机号').show();
                $(".popup_list input[type='tel']").focus();
            }
			return false;
        });
        
        //状态检查
        function checkState()
        {
            var flag = false;
            var isCheck = $("#accept").prop("checked");
            if(isCheck != null && isCheck == true)
            {
                flag = true;

            }
            if(flag)
            {
            	$('#next').removeAttr("disabled").addClass("next_02");
                $('body').delegate('#next', 'click', function()
                {
                    $(".mark_apply_create").find(".popup_c:eq(1)").show().siblings().hide();

                });
            }
            else
            {
                $('#next').attr("disabled",true).removeClass('next_02');
            }
            //alert(flag);

        };


        $("body").delegate('.close', 'click', function()
        {
        	$(".mark_apply_create").addClass("hide");
            document.documentElement.style.cssText = '';
            document.body.style.cssText = '';
        });
        
    });
</script>
<script src="/js/follow_forum.js"></script>
<div class="subnav">
    <div class="apply_box hidden-xs">
        <div class="apply_creat"><i class="fa fa-plus"></i><a href="javascript:;" class="apply_CreatF">申请创建主题</a> </div>
        <!-- 申请创建主题弹出层 -->
    </div>
                        <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/33"><img src="http://img.my.csdn.net/DK3tvRoLO4143521864683.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/33">PrestoDB</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        15                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="33">370572</span>
                        <a nodeType="followForum" nodeForum="33"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/17"><img src="http://img.my.csdn.net/MNRWjc3wap143392727868.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/17">/home</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        49                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/43"><img src="http://img.my.csdn.net/P0lOrYmAtj143530583856.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/43">人工智能</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        508                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="43">369550</span>
                        <a nodeType="followForum" nodeForum="43"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/14"><img src="http://img.my.csdn.net/dsJwXit5na143591850915.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/14">全栈工程师</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        89                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="14">369192</span>
                        <a nodeType="followForum" nodeForum="14"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/49"><img src="http://img.my.csdn.net/V9QCwvrkmp143529794467.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/49">云计算</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        368                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="49">368894</span>
                        <a nodeType="followForum" nodeForum="49"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/48"><img src="http://img.my.csdn.net/rv8p1iMnu0143521724486.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/48">Spark</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        241                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="48">368796</span>
                        <a nodeType="followForum" nodeForum="48"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/50"><img src="http://img.my.csdn.net/sGZXqI2zgH143522572826.jpeg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/50">潜水猿</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        127                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="50">368763</span>
                        <a nodeType="followForum" nodeForum="50"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/12"><img src="http://img.my.csdn.net/O1FNR4yTXm143356797280.jpeg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/12">Swift</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        333                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="12">368429</span>
                        <a nodeType="followForum" nodeForum="12"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/8"><img src="http://img.my.csdn.net/CtrcOjGBpS143349656673.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/8">Rust</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        86                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="8">367702</span>
                        <a nodeType="followForum" nodeForum="8"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/1"><img src="http://img.my.csdn.net/awG5LZABlv143523199429.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/1">GEEKNEWS</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        13149                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="1">367045</span>
                        <a nodeType="followForum" nodeForum="1"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/55"><img src="http://img.my.csdn.net/f2UWwMmGZz143528624529.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/55">IoT</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        221                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="55">366920</span>
                        <a nodeType="followForum" nodeForum="55"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/53"><img src="http://img.my.csdn.net/geuDfP5zHN143528378479.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/53">Container</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        733                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="53">366845</span>
                        <a nodeType="followForum" nodeForum="53"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/58"><img src="http://img.my.csdn.net/mglGeRV7CX143564737199.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/58">安全</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        625                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="58">361101</span>
                        <a nodeType="followForum" nodeForum="58"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/57"><img src="http://img.my.csdn.net/F620rACS3G143556662298.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/57">SDN</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        249                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="57">359796</span>
                        <a nodeType="followForum" nodeForum="57"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/47"><img src="http://img.my.csdn.net/OMkpa72H4l143571748832.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/47">前端</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        576                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="47">355704</span>
                        <a nodeType="followForum" nodeForum="47"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/61"><img src="http://geek.csdn.net/images/logo.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/61">技术翻译</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        0                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="61">353344</span>
                        <a nodeType="followForum" nodeForum="61"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/63"><img src="http://img.my.csdn.net/kthxrEHsGf143773248348.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/63">虚拟现实</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        83                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="63">340707</span>
                        <a nodeType="followForum" nodeForum="63"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/65"><img src="http://img.my.csdn.net/5P3t8ColM6143773109169.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/65">Android开发者</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        1660                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="65">333504</span>
                        <a nodeType="followForum" nodeForum="65"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/68"><img src="http://img.my.csdn.net/J3VSGmvd74143813447354.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/68">Python开发者</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        542                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="68">333162</span>
                        <a nodeType="followForum" nodeForum="68"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/67"><img src="http://img.my.csdn.net/avR5Ks1uLc143762009993.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/67">Nodejs</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        23                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="67">332939</span>
                        <a nodeType="followForum" nodeForum="67"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/66"><img src="http://img.my.csdn.net/YkV2WnTohM144888044066.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/66">iOS开发</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        548                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="66">332687</span>
                        <a nodeType="followForum" nodeForum="66"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/70"><img src="http://img.my.csdn.net/JazGbfYED5143813961569.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/70">AngularJS</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        80                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="70">321712</span>
                        <a nodeType="followForum" nodeForum="70"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/71"><img src="http://img.my.csdn.net/xIcAvHDzOR144888088736.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/71">Grails/Groovy</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        6                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="71">316307</span>
                        <a nodeType="followForum" nodeForum="71"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/73"><img src="http://img.my.csdn.net/XDZUh21zpG143859109622.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/73">Git教程</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        359                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="73">309469</span>
                        <a nodeType="followForum" nodeForum="73"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/75"><img src="http://img.my.csdn.net/oZnFATPDqj144888033927.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/75">Go</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        499                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="75">298299</span>
                        <a nodeType="followForum" nodeForum="75"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/77"><img src="http://img.my.csdn.net/4AQmuEIgrn143928858133.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/77">CSDN PHPer</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        1                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="77">296232</span>
                        <a nodeType="followForum" nodeForum="77"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/76"><img src="http://geek.csdn.net/images/logo.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/76">CSDN前端</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        2                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="76">296075</span>
                        <a nodeType="followForum" nodeForum="76"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/78"><img src="http://img.my.csdn.net/pIbAKtaEh5144893349940.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/78">C#极客区</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        5                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="78">268204</span>
                        <a nodeType="followForum" nodeForum="78"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/79"><img src="http://img.my.csdn.net/Rl6AKn1ac7144189314736.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/79">.NET</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        327                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="79">253584</span>
                        <a nodeType="followForum" nodeForum="79"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/80"><img src="http://img.my.csdn.net/RObpn026Sy144888026019.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/80">微信开发</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        34                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="80">253168</span>
                        <a nodeType="followForum" nodeForum="80"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/83"><img src="http://img.my.csdn.net/0XxaDS1Wc9144893533149.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/83">架构</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        443                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="83">241368</span>
                        <a nodeType="followForum" nodeForum="83"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/87"><img src="http://img.my.csdn.net/Hp21VOIYxh144349348582.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/87">程序人生</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        2259                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="87">200065</span>
                        <a nodeType="followForum" nodeForum="87"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/90"><img src="http://img.my.csdn.net/GBACN43JhL144524844259.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/90">Blender</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        31                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="90">188114</span>
                        <a nodeType="followForum" nodeForum="90"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/89"><img src="http://img.my.csdn.net/BUqe9bJ6g1144533339489.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/89">智能硬件</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        193                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="89">188034</span>
                        <a nodeType="followForum" nodeForum="89"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/93"><img src="http://img.my.csdn.net/70LD5BHumn144540767390.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/93">Java</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        1995                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="93">187125</span>
                        <a nodeType="followForum" nodeForum="93"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/95"><img src="http://img.my.csdn.net/Zg24kemEyq144556413185.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/95">Linux/UNIX</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        750                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="95">186222</span>
                        <a nodeType="followForum" nodeForum="95"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/94"><img src="http://img.my.csdn.net/leyM3b7PDX144552199390.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/94">PHP开发者</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        306                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="94">186114</span>
                        <a nodeType="followForum" nodeForum="94"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/123"><img src="http://img.my.csdn.net/nHt7vSkKB6144893604348.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/123">计算机视觉</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        53                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="123">178265</span>
                        <a nodeType="followForum" nodeForum="123"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/122"><img src="http://img.my.csdn.net/Dpz9hok4KF144663586247.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/122">Toolwith</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        27                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="122">178172</span>
                        <a nodeType="followForum" nodeForum="122"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/121"><img src="http://img.my.csdn.net/OyWbxCuKlV144887231285.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/121">Visual Studio</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        105                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="121">178102</span>
                        <a nodeType="followForum" nodeForum="121"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/120"><img src="http://img.my.csdn.net/XcaeA5rg8H144887241492.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/120">Tomcat</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        33                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="120">178022</span>
                        <a nodeType="followForum" nodeForum="120"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/119"><img src="http://img.my.csdn.net/hqlYd32sHF144887255623.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/119">Storm</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        34                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="119">178016</span>
                        <a nodeType="followForum" nodeForum="119"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/118"><img src="http://img.my.csdn.net/ehU21L9FO3144887294948.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/118">Eclipse</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        56                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="118">178013</span>
                        <a nodeType="followForum" nodeForum="118"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/117"><img src="http://img.my.csdn.net/cXjby5u4BR144887277714.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/117">Sublime Text</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        36                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="117">177982</span>
                        <a nodeType="followForum" nodeForum="117"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/116"><img src="http://img.my.csdn.net/cOkrXyNJBE144893581816.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/116">网络基础</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        162                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="116">177959</span>
                        <a nodeType="followForum" nodeForum="116"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/115"><img src="http://img.my.csdn.net/RH43SehVqx144893497922.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/115">敏捷开发</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        100                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="115">177954</span>
                        <a nodeType="followForum" nodeForum="115"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/114"><img src="http://img.my.csdn.net/0q7Cd3IxtM144887898794.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/114">Nginx</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        68                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="114">177915</span>
                        <a nodeType="followForum" nodeForum="114"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/113"><img src="http://img.my.csdn.net/J6cOox4gzZ144887885791.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/113">Windows</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        367                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="113">177880</span>
                        <a nodeType="followForum" nodeForum="113"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/111"><img src="http://img.my.csdn.net/T15Ddalr0y144887971582.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/111">Emacs</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        23                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="111">177866</span>
                        <a nodeType="followForum" nodeForum="111"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/109"><img src="http://img.my.csdn.net/LWa7ZDQT1b144887966086.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/109">Vim</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        216                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="109">177853</span>
                        <a nodeType="followForum" nodeForum="109"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/112"><img src="http://img.my.csdn.net/4a3shubIQr144887892187.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/112">Hadoop</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        130                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="112">177849</span>
                        <a nodeType="followForum" nodeForum="112"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/108"><img src="http://img.my.csdn.net/nUASPaEXqp144887960765.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/108">Redis</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        60                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="108">177828</span>
                        <a nodeType="followForum" nodeForum="108"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/107"><img src="http://img.my.csdn.net/JgplKCNEFy144887946436.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/107">MongoDB</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        76                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="107">177791</span>
                        <a nodeType="followForum" nodeForum="107"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/106"><img src="http://img.my.csdn.net/Acob4WC0kD144887938719.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/106">PostgreSQL</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        43                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="106">177773</span>
                        <a nodeType="followForum" nodeForum="106"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/105"><img src="http://img.my.csdn.net/y0xnvmTC68144887925720.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/105">MySQL</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        144                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="105">177758</span>
                        <a nodeType="followForum" nodeForum="105"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/104"><img src="http://img.my.csdn.net/sw2PQYAE19144887910085.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/104">Ruby</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        79                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="104">177712</span>
                        <a nodeType="followForum" nodeForum="104"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/103"><img src="http://img.my.csdn.net/elgTq24ydV144893567137.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/103">C/C++</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        2206                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="103">177699</span>
                        <a nodeType="followForum" nodeForum="103"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/102"><img src="http://img.my.csdn.net/5U9w8lJIQs144887307264.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/102">jQuery</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        444                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="102">177639</span>
                        <a nodeType="followForum" nodeForum="102"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/101"><img src="http://img.my.csdn.net/dehwco7GqS144887299954.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/101">Bootstrap</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        89                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="101">177589</span>
                        <a nodeType="followForum" nodeForum="101"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/100"><img src="http://img.my.csdn.net/OmLoMva03H144893435334.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/100">React</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        78                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="100">177528</span>
                        <a nodeType="followForum" nodeForum="100"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/99"><img src="http://img.my.csdn.net/YS4bLTEk5e144887270717.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/99">JavaScript</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        528                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="99">177481</span>
                        <a nodeType="followForum" nodeForum="99"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/98"><img src="http://img.my.csdn.net/yR3kKEAzg8144893651210.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/98">CSS/CSS3</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        621                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="98">177414</span>
                        <a nodeType="followForum" nodeForum="98"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/97"><img src="http://img.my.csdn.net/ltzpoHYnJd144893645240.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/97">HTML/H5</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        475                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="97">177374</span>
                        <a nodeType="followForum" nodeForum="97"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/125"><img src="http://img.my.csdn.net/SFZlvItHnO144893635080.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/125">数据科学</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        315                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="125">166390</span>
                        <a nodeType="followForum" nodeForum="125"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/127"><img src="http://img.my.csdn.net/opMWAyzR7c144893628039.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/127">算法</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        310                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="127">162091</span>
                        <a nodeType="followForum" nodeForum="127"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/133"><img src="http://img.my.csdn.net/17TajP3OBy145094931568.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/133">大数据</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        20                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="133">101217</span>
                        <a nodeType="followForum" nodeForum="133"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/134"><img src="http://geek.csdn.net/images/logo.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/134">行业动态</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        16                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="134">101211</span>
                        <a nodeType="followForum" nodeForum="134"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/132"><img src="http://img.my.csdn.net/7eNgVqDI2T145094637245.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/132">移动开发</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        24                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="132">101202</span>
                        <a nodeType="followForum" nodeForum="132"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/131"><img src="http://img.my.csdn.net/Emn8zLwWkX145094569094.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/131">数据库</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        15                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="131">101105</span>
                        <a nodeType="followForum" nodeForum="131"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/129"><img src="http://img.my.csdn.net/3SXOktwzbe145076477620.png?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/129">TensorFlow </a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        12                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="129">100997</span>
                        <a nodeType="followForum" nodeForum="129"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/136"><img src="http://geek.csdn.net/images/logo.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/136">OpenStack</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        8                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="136">33672</span>
                        <a nodeType="followForum" nodeForum="136"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
                    <dl class="forum_list">
                <dt><a href="http://geek.csdn.net/forum/137"><img src="http://geek.csdn.net/images/logo.jpg?imageView2/2/w/160"></a></dt>
                <dd>
                    <h4><a href="http://geek.csdn.net/forum/137">CTO俱乐部</a></h4>
                    <p>
                         <i class="fa fa-file-text" title="文章数"></i>
                        44                                                <i class="fa fa-users" title="关注人数"></i> 
                        <span forum-follows="137">31712</span>
                        <a nodeType="followForum" nodeForum="137"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                  			</p>
                </dd>
            </dl>
            
</div>


<script type="text/javascript">
    $(function(){
        showFollowForum();
    });
</script>                <div class="defaultnav">
                    
                    <ul class="nav_bar list-unstyled">
                    	                    	                        <li class="site_name" title="GEEK头条，人人都是主编">
</li>
<li>
        <!--发表链接、发表主题、搜索-->
    <div class="pub_to">
        <div class="to_pub">
            <a data-target="geek_link" class="start_cmmde"><i class="fa fa-link"></i><span>发布链接</span></a>
            <a data-target="geek_new" class="start_cmmde"><i class="fa fa-file-text-o"></i><span>发布图文</span></a>
        </div>
        <div class="search_l">
				            <span>
				                <i id="search_nav" class="fa fa-search"></i>
				            </span>
            <input id="keyword" type="text" placeholder="搜索"/>
        </div>
    </div>
</li>
<li><span class="toggle-subnav">全部主题</span> </li>
<li><span>热门主题</span> <i class="fa fa-angle-up"></i>
                <dl class="hot_forum">
                        <a href="http://geek.csdn.net/forum/33" title="PrestoDB， 15 篇文章，370572人关注"><img src="http://img.my.csdn.net/DK3tvRoLO4143521864683.jpg"></a>

                        <a href="http://geek.csdn.net/forum/17" title="/home， 49 篇文章，369958人关注"><img src="http://img.my.csdn.net/MNRWjc3wap143392727868.jpg"></a>

                        <a href="http://geek.csdn.net/forum/43" title="人工智能， 508 篇文章，369550人关注"><img src="http://img.my.csdn.net/P0lOrYmAtj143530583856.jpg"></a>

                        <a href="http://geek.csdn.net/forum/14" title="全栈工程师， 89 篇文章，369192人关注"><img src="http://img.my.csdn.net/dsJwXit5na143591850915.png"></a>

                        <a href="http://geek.csdn.net/forum/49" title="云计算， 368 篇文章，368894人关注"><img src="http://img.my.csdn.net/V9QCwvrkmp143529794467.jpg"></a>

                    </dl>
    </li>                        						                                <li class="contribution"><span>贡献榜</span><a target="_blank" href="http://geek.csdn.net/rank" class="all">全部</a><i class="fa fa-angle-up"></i>
                    <dl>
                <dt><a href="http://geek.csdn.net/user/publishlist/yxy1992_123" target="_blank"><img src="http://avatar.csdn.net/1/E/A/2_yxy1992_123.jpg" class="avatar"></a></dt>
                <dd>
					<a title="yxy1992_123" class="user_name"  href="http://geek.csdn.net/user/publishlist/yxy1992_123" target="_blank">yxy1992_123</a>
                                            <a nodeType="followUser" nodeUser="yxy1992_123"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                        <p></p>
                </dd>
            </dl>
                    <dl>
                <dt><a href="http://geek.csdn.net/user/publishlist/u011109959" target="_blank"><img src="http://avatar.csdn.net/C/4/9/2_u011109959.jpg" class="avatar"></a></dt>
                <dd>
					<a title="u011109959" class="user_name"  href="http://geek.csdn.net/user/publishlist/u011109959" target="_blank">u011109959</a>
                                            <a nodeType="followUser" nodeUser="u011109959"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                        <p></p>
                </dd>
            </dl>
                    <dl>
                <dt><a href="http://geek.csdn.net/user/publishlist/w397090770" target="_blank"><img src="http://avatar.csdn.net/A/C/C/2_w397090770.jpg" class="avatar"></a></dt>
                <dd>
					<a title="w397090770" class="user_name"  href="http://geek.csdn.net/user/publishlist/w397090770" target="_blank">w397090770</a>
                                            <a nodeType="followUser" nodeUser="w397090770"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                        <p>个人大数据技术博客：http://www.iteblog.com</p>
                </dd>
            </dl>
                    <dl>
                <dt><a href="http://geek.csdn.net/user/publishlist/royal_lr" target="_blank"><img src="http://avatar.csdn.net/7/5/6/2_royal_lr.jpg" class="avatar"></a></dt>
                <dd>
					<a title="royal_lr" class="user_name"  href="http://geek.csdn.net/user/publishlist/royal_lr" target="_blank">royal_lr</a>
                                            <a nodeType="followUser" nodeUser="royal_lr"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                        <p></p>
                </dd>
            </dl>
                    <dl>
                <dt><a href="http://geek.csdn.net/user/publishlist/frank_jay" target="_blank"><img src="http://avatar.csdn.net/6/7/E/2_frank_jay.jpg" class="avatar"></a></dt>
                <dd>
					<a title="frank_jay" class="user_name"  href="http://geek.csdn.net/user/publishlist/frank_jay" target="_blank">frank_jay</a>
                                            <a nodeType="followUser" nodeUser="frank_jay"  href="javascript:;" class="focus_btn"><span><i class="fa fa-plus"></i>关注</span><strong>已关注</strong><b>取消关注</b></a>
                                        <p></p>
                </dd>
            </dl>
            </li>
<script src="/js/follow_person.js"></script>
<script type="text/javascript">
    $(function(){
        showFollowUser();
    });
</script>						                    	                        
                    </ul>
                    <!--分类下的左侧广告 2015-12-16-->                    
                    <div class="category_ad">
		       	
		
	<!--<a href="#"><img src="/assets/images/category_ad_l.jpg"/></a>-->
</div>                </div>
            </div>
        </div>
    </div>
    <div id="leftnav_scr_bar">
        <div class="scroller_track">
            <div class="scroller_handle"></div>
        </div>
    </div>
</div>
	
<div class="right_cont" id="newest" data-pjax-container>


<div class="right_cont_body" tabindex="1">
    <div class="close_right"><i class="fa fa-remove"></i></div>
    <dl class="header  bor">
        <dt>

            <div class="news_vote" voteid="52407">
                <i class="fa fa-sort-up" datatype="up"></i>
                <div class="count">13</div>
                <i class="fa fa-sort-down" datatype="down"></i>
            </div>
        </dt>
        <dd>


            <h2>
                                <span>Openstack虚拟机镜像深度实践</span>                            </h2>
                                    <div class="clearfix">
                                                <div class="tags pull-left" data-tag="云计算,OpenStack,绿星云">
                                    <a class="label label-default" href="http://www.csdn.net/tag/云计算/news" target="_blank">云计算</a>
                                    <a class="label label-default" href="http://www.csdn.net/tag/OpenStack/news" target="_blank">OpenStack</a>
                                    <a class="label label-default" href="http://www.csdn.net/tag/绿星云/news" target="_blank">绿星云</a>
                                </div>
                                <div class="pull-right" id="52407">
                                        <i class="fa fa-warning" data-toggle="tooltip" data-placement="bottom" onclick="report('news', 'karamos', '52407');" title="投诉">
                    </i>
                                                        </div>
            </div>
        </dd>
    </dl>
    <script type="text/javascript">
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
        <!--<a class="btn btn-primary start_cmmde" data-target="geek">写极客头条</a>-->
    <!--详情页面广告 2015-12-15 11:08-->
    <div class="detail_ad_top">
    <div class="detail_ad_t_l">
        	<script type="text/javascript">
			document.write('<script type="text/javascript" ads-src="http://csdnim.qtmojo.com/main/s?user=csdn|geek_newsdetail|banner1&db=csdnim&border=0&local=yes&js=ie" src=" http://creatim.qtmojo.cn/td/AllyesDeliver.min.js" charset="gbk"></'+'script>');
		</script>
    	<!--<a href="#"><img src="/assets/images/detail_ad_top.jpg"/></a>-->
        </div>
    <div class="detail_ad_t_r">
        	<script type="text/javascript">
			document.write('<script type="text/javascript" ads-src="http://csdnim.qtmojo.com/main/s?user=csdn|geek_newsdetail|banner2&db=csdnim&border=0&local=yes&js=ie" src=" http://creatim.qtmojo.cn/td/AllyesDeliver.min.js" charset="gbk"></'+'script>');
		</script>
	    	<!--<a href="#"><img src="/assets/images/detail_ad_top.jpg"/></a>-->
    </div>
</div>

				<div class="news_description ">
                        <div class="description markdown_views">
                <p>虚拟机镜像（以下简称镜像）是Openstack云计算平台不可或缺的一部分。利用各种定制化的镜像，我们可以快速创建出满足不同目的的虚拟机。例如，利用一个安装并配置了Apache、Mysql和PHP的Linux操作系统镜像，就可以在Openstack平台上秒级创建出多台LAMP服务器，可以直接用于部署或者开发。</p><p>要充分利用好镜像的优势，关键就是掌握好如何制作定制化的镜像，这往往也伴随着如何测试和管理这些镜像。本文主要介绍：1. 制作满足Openstack要求的镜像的流程；2. 利用devstack对制作好的镜像进行测试。</p><p>本文出现的命令和配置都是实际测试可行的，可以直接复制使用；但本文更多是介绍各个操作配置的原理和目的，这样即使在不同的运行环境，我们仍可以把握关键细节，完成镜像的制作和测试。</p><p><strong>主要内容</strong>：</p><ul>
<li>原理和流程简介</li>
<li>准备工作</li>
<li>制作镜像</li>
<li>测试镜像</li>
<li>附录</li>
</ul><h2>原理和流程简介</h2><p>虚拟机镜像实际就是一个包含整个虚拟磁盘内容的文件，这个虚拟磁盘也就是虚拟机的系统盘，包含可以引导启动的操作系统。所谓定制化的镜像，就是在这个（虚拟）系统盘上安装好需要的软件，保存好需要的配置，最后清理掉不必要的临时文件和日志等数据。最简单直观的定制方式，就是用一个干净的镜像作为系统盘创建一台虚拟机，安装好需要的操作系统，然后就可以像平时的操作那样安装需要的软件，保存配置，再利用工具清理不需要的数据，最后关闭虚拟机，镜像就定制化完成了。当然，我们也可以使用已经制作好的镜像直接创建虚拟机，这样可以省略操作系统和一些软件的安装步骤。</p><p>所谓Openstack虚拟机镜像，就是满足一些要求（安装特定的软件，配置特定的服务等）的镜像，从而配合完成Openstack计算平台的镜像相关功能。</p><p>测试镜像也很简单，就是把制作好的镜像导入Openstack平台，使用它来创建虚拟机，测试各个功能是否正常运作。搭建一个Openstack平台用于测试的方式很多种，本文选择了devstack，因为devstack的安装步骤很简单，而且很轻量，可以直接安装在一台虚拟机中。</p><h2>准备工作</h2><p>本文的例子所在运行环境的操作系统为Centos 7，并利用基于libvirt的一系列工具来创建和管理虚拟机，针对的虚拟化技术（hypervisor）为QEMU/KVM。 <br>
libvirt和kvm分别是Openstack上面最常用的工具和虚拟化平台。</p><p><strong>1.安装好虚拟化工具</strong></p><pre class="prettyprint"><code class=" hljs lasso">yum install qemu libvirt<span class="hljs-attribute">-client</span> virt<span class="hljs-attribute">-manager</span> virt<span class="hljs-attribute">-viewer</span> guestfish libguestfs<span class="hljs-attribute">-tools</span> virt<span class="hljs-attribute">-top</span>
</code></pre><p><strong>2.创建虚拟子网</strong></p><p>目的：因为虚拟机在安装软件过程中需要连通互联网，最简单的办法就是利用libvirt创建一个虚拟子网，虚拟机通过dhcp分配虚拟子网的ip，通过NAT的方式访问外网。</p><p><img src="http://img.blog.csdn.net/20160122092015943" alt="图片描述" title=""></p><p>2.1 准备虚拟网络资源的xml文件default.xml：</p><pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">network</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>default<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">bridge</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"virbr0"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">forward</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">ip</span> <span class="hljs-attribute">address</span>=<span class="hljs-value">"192.168.122.1"</span> <span class="hljs-attribute">netmask</span>=<span class="hljs-value">"255.255.255.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dhcp</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">range</span> <span class="hljs-attribute">start</span>=<span class="hljs-value">"192.168.122.2"</span> <span class="hljs-attribute">end</span>=<span class="hljs-value">"192.168.122.254"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dhcp</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">ip</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">network</span>&gt;</span></code></pre><p>2.2 配置：</p><pre class="prettyprint"><code class=" hljs haskell">\# virsh net-define /usr/share/libvirt/networks/<span class="hljs-default"><span class="hljs-keyword">default</span>.xml</span>
<span class="hljs-type">Network</span> <span class="hljs-default"><span class="hljs-keyword">default</span> defined from /usr/share/libvirt/networks/<span class="hljs-keyword">default</span>.xml</span>
\# virsh net-autostart <span class="hljs-default"><span class="hljs-keyword">default</span></span>
<span class="hljs-type">Network</span> <span class="hljs-default"><span class="hljs-keyword">default</span> marked as autostarted</span>
\# virsh net-start <span class="hljs-default"><span class="hljs-keyword">default</span></span>
<span class="hljs-type">Network</span> <span class="hljs-default"><span class="hljs-keyword">default</span> started</span></code></pre><p>2.3 修改系统配置/etc/sysctl.conf：</p><pre class="prettyprint"><code class=" hljs avrasm">net<span class="hljs-preprocessor">.ipv</span>4<span class="hljs-preprocessor">.ip</span>_forward = <span class="hljs-number">1</span></code></pre><p>环境准备好了，可以开始制作镜像了。</p><h2>制作镜像</h2><h3>制作Linux镜像</h3><p>Linux镜像需要满足：</p><p>1.配置SSH server开机运行。 <br>
2.禁用防火墙。 <br>
3.开机时支持磁盘分区和改变大小。 <br>
4.支持ssh公钥访问虚拟机。 <br>
5.运行和使用user data和metadata（如修改root密码，执行用户脚本等）。 <br>
6.操作系统内核支持Virtio。 <br>
7.没有写死的MAC地址信息。</p><p>其中1、2很容易操作，本文使用的Centos 7安装盘默认安装后就满足了。3、4、5三条，只需要安装一个cloud-init的服务就可以了。</p><p>cloud-init是一系列python脚本和工具，负责云实例最开始的初始化工作。具体运行原理参考附录：cloud-init工作原理。</p><p>第6条，Virtio是提高KVM类型的虚拟机I/O（存储和网络）性能的一种技术。目前常用的Linux发行版本内核都直接支持了，如果你的安装版本有特殊需求，可以查看这里。 <br>
关于Virtio的细节，可以参考附录：虚拟机性能优化.</p><p>第7条，使用工具virt-sysprep清理。</p><p>下面以Centos 7.1的安装为例，其他发行版本可以参考Openstack的文档：</p><p>1.准备好ISO安装文件，下载。</p><p>2.创建一个磁盘：qemu-img create -f qcow2 image.qcow2 20G <br>
    因为针对的是KVM，因此本文使用的镜像格式是qcow2（QEMU copy-on-write version 2），关于镜像格式更多细节，可查看附录：镜像格式。镜像大小没有特殊要求，根据需求即可。镜像完成后是可以通过qemu-img增大的，但是一般很难缩小。</p><p>3.创建并启动虚拟机：</p><p>使用virt-install命令进行创建，通过vnc图形界面安装（本地需要安装一个vnc客户端来访问vnc界面）：</p><pre class="prettyprint"><code class=" hljs haml">virt-install --virt-type kvm --cpu cpu64-rhel6 --ram 2048 \
-<span class="ruby">-name image_name \
</span>-<span class="ruby">-disk path=image.qcow2,format=qcow2,device=disk,bus=virtio \
</span>-<span class="ruby">-network network=default,model=virtio \
</span>-<span class="ruby">-graphics vnc,listen=<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>,password=<span class="hljs-constant">Yourpassw0rd</span> --noautoconsole \
</span>-<span class="ruby">-os-type=linux \
</span>-<span class="ruby">-extra-args=<span class="hljs-string">"console=ttyS0,115200n8 console=tty0"</span> \
</span>-<span class="ruby">-location=<span class="hljs-regexp">/path/to</span><span class="hljs-regexp">/installer.iso</span></span></code></pre><p>或者通过虚拟console（命令行）界面安装，执行virsh console image_name进入console界面，ctrl+]退出：</p><pre class="prettyprint"><code class=" hljs haml">virt-install --virt-type kvm --cpu cpu64-rhel6 --ram 2048 \
-<span class="ruby">-name image_name \
</span>-<span class="ruby">-disk path=image.qcow2,format=qcow2,device=disk,bus=virtio \
</span>-<span class="ruby">-network network=default,model=virtio \
</span>-<span class="ruby">-os-type=linux \
</span>-<span class="ruby">-nographics \
</span>-<span class="ruby">-extra-args=<span class="hljs-string">"console=tty0 console=ttyS0,115200n8 serial"</span> \
</span>-<span class="ruby">-location=<span class="hljs-regexp">/path/to</span><span class="hljs-regexp">/installer.iso
</span></span></code></pre><p>这些命令参数的含义多数都比较直观，其中：</p><p>–cpu cpu64-rhel6：虚拟机的cpu特性集合，因为不同物理机的cpu特性都不同，为了保证虚拟机在不同物理机之间迁移时的cpu兼容性，Openstack平台往往会指定一个虚拟的cpu特性集合（物理机cpu特性的子集），用于所有的虚拟机。其他集合可以通过cat /usr/share/libvirt/cpu_map.xml查看。这里的cpu64-rhel6只是个示例，根据实际情况指定即可。</p><p>–graphics vnc,listen=0.0.0.0,password=Yourpassw0rd：通过vnc的方式提供安装界面，通过virsh vncdisplay image_name来查看vnc监听端口（vnc端口通常从tcp端口5900开始）。然后就可以使用vnc客户端进行操作。例如noVNC。</p><p>–location=/path/to/installer.iso和–extra-args=”console=tty0 console=ttyS0,115200n8 serial”：指定ISO安装文件路径，在内核启动阶段，应用指定的参数。</p><p>4.按照步骤要求安装操作系统（比如设置root密码，设置时区，网络和分区等）。</p><p>5.如果虚拟机dhcp没有正确配置，需要配置一下。centos 7的话，需要编辑/etc/sysconfig/network-scripts/ifcfg-ens3（根据网卡接口名字不同），修改ONBOOT=yes，然后执行service network restart。</p><p>6.弹出虚拟cd，关机并重启</p><pre class="prettyprint"><code class=" hljs lasso">virsh attach<span class="hljs-attribute">-disk</span> <span class="hljs-subst">--</span><span class="hljs-keyword">type</span> cdrom <span class="hljs-subst">--</span>mode readonly image_name <span class="hljs-string">""</span> hdb
virsh destroy image_name
virsh start image_name</code></pre><p>7.重新登录（virsh console image_name或者ssh或者vnc），然后就可以安装基本的服务和修改配置：</p><pre class="prettyprint"><code class=" hljs cmake">\<span class="hljs-comment"># 安装ACPI</span>
yum <span class="hljs-keyword">install</span> acpid
chkconfig acpid <span class="hljs-keyword">on</span>
\<span class="hljs-comment"># 安装NetworkManager,用于网卡的自动发现及管理</span>
yum <span class="hljs-keyword">install</span> NetworkManager
chkconfig NetworkManager <span class="hljs-keyword">on</span>
\<span class="hljs-comment"># 安装cloud-init</span>
yum <span class="hljs-keyword">install</span> cloud-init
\<span class="hljs-comment"># 禁用默认的zeroconf route</span>
echo <span class="hljs-string">"NOZEROCONF=yes"</span> &gt;&gt; /etc/sysconfig/network</code></pre><p>8.关机shutdown -h now。</p><p>9.关机后回到宿主机，执行virt-sysprep -d image_name，擦除虚拟机镜像中的无用数据（MAC地址等）。</p><p>10.取消虚拟机：virsh undefine image_name。</p><p>11.这个镜像（image.qcow2）就可以用了。 <br>
因为我们通常对同一个Linux版本制作多种镜像，没必要每次都从头开始。我们可以跳过1 - 7步骤，基于一个已经制作好了的镜像创建虚拟机，登录后进行具体的定制化行为，然后再完成8 - 10：</p><pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">virt</span><span class="hljs-literal">-</span><span class="hljs-comment">install</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">virt</span><span class="hljs-literal">-</span><span class="hljs-comment">type</span> <span class="hljs-comment">kvm</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">cpu</span> <span class="hljs-comment">cpu64</span><span class="hljs-literal">-</span><span class="hljs-comment">rhel6</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">ram</span> <span class="hljs-comment">2048</span> <span class="hljs-comment">\</span>
    <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">name</span> <span class="hljs-comment">image_name</span> <span class="hljs-comment">\</span>
    <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">disk</span> <span class="hljs-comment">path=image</span><span class="hljs-string">.</span><span class="hljs-comment">qcow2</span><span class="hljs-string">,</span><span class="hljs-comment">format=qcow2</span><span class="hljs-string">,</span><span class="hljs-comment">device=disk</span><span class="hljs-string">,</span><span class="hljs-comment">bus=virtio</span> <span class="hljs-comment">\</span>
    <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">network</span> <span class="hljs-comment">network=default</span><span class="hljs-string">,</span><span class="hljs-comment">model=virtio</span> <span class="hljs-comment">\</span>
    <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">graphics</span> <span class="hljs-comment">vnc</span><span class="hljs-string">,</span><span class="hljs-comment">listen=0</span><span class="hljs-string">.</span><span class="hljs-comment">0</span><span class="hljs-string">.</span><span class="hljs-comment">0</span><span class="hljs-string">.</span><span class="hljs-comment">0</span><span class="hljs-string">,</span><span class="hljs-comment">password=Yourpassw0rd</span> <span class="hljs-comment">\</span>
    <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">noautoconsole</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">os</span><span class="hljs-literal">-</span><span class="hljs-comment">type=linux</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">import</span></code></pre><h2>制作Windows镜像</h2><p>Windows镜像的制作和Linux会有所不同：</p><p>Windows平台上是通过一个和cloud-init类似的服务，cloudbase-init，来帮助虚拟机初始化的。Windows平台要额外安装virtio-win驱动，才能使用Virtio来提高I/O性能。下面以Windows 2008为例：</p><p>1.准备好Windoes 2008的ISO安装盘。</p><p>2.准备好Virtio驱动的ISO安装盘，下载地址</p><p>3.创建一个磁盘镜像：</p><pre class="prettyprint"><code class=" hljs lasso">qemu<span class="hljs-attribute">-img</span> create <span class="hljs-attribute">-f</span> qcow2 ws2008<span class="hljs-built_in">.</span>qcow2 <span class="hljs-number">20</span>G</code></pre><p>4.创建并启动虚拟机：</p><pre class="prettyprint"><code class=" hljs haml"> virt-install --connect qemu:///system \
  -<span class="ruby">-name image_name --ram <span class="hljs-number">2048</span> --vcpus <span class="hljs-number">2</span> \
</span>  -<span class="ruby">-network network=default,model=virtio \
</span>  -<span class="ruby">-disk path=image.qcow2,format=qcow2,device=disk,bus=virtio \
</span>  -<span class="ruby">-cdrom /path/to/win2008_installer.iso \
</span>  -<span class="ruby">-disk path=<span class="hljs-regexp">/path/to</span><span class="hljs-regexp">/virtio-win-0.1.102.iso,device=cdrom \
</span></span>  -<span class="ruby">-graphics vnc,listen=<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>,password=<span class="hljs-constant">Yourpassw0rd</span> \
</span>  -<span class="ruby">-os-type windows --os-variant win2k8
</span></code></pre><p>5.通过vnc进入安装界面，开始安装过程。</p><p>6.安装Virtio驱动。</p><p>当安装程序进入选择系统盘的步骤时，会找不到可用磁盘，这是理所当然的（因为相关驱动还没安装）。此时选择“加载启动”（Load drivers），找到virtio-win的目录，选择合适的驱动，安装即可（因为例子中安装的是Windows 2008 64bit，因此选择的是amd64下的Win2008）。要安装两种驱动：VirtIO SCSI和network。安装完成后就可以看到可用磁盘了。</p><p>7.选择系统盘，继续安装步骤。</p><p>8.以Administrator身份进入桌面，打开cmd，完成Virtio的安装：</p><p>C:\pnputil -i -a E:\PATH\TO*.INF</p><p>9.安装Cloudbase-init，打开Powershell（如果默认没有安装，先安装），并运行： <br>
C:\powershell <br>
C:\Set-ExecutionPolicy Unrestricted <br>
用IE打开<a href="http://www.cloudbase.it/downloads/CloudbaseInitSetup_Stable_x64.msi">http://www.cloudbase.it/downloads/CloudbaseInitSetup_Stable_x64.msi</a>，下载并安装。</p><p>这个过程中可能需要：1. 关闭IE安全增强设置；2. 下载的msi文件需要右键点击属性，Unblock。</p><p>安装过程中，需要指定以下几项：</p><pre class="prettyprint"><code class=" hljs haml">-<span class="ruby"> <span class="hljs-constant">Username</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Administrator</span>
</span>-<span class="ruby"> <span class="hljs-constant">Network</span> adapter to <span class="hljs-symbol">configure:</span> <span class="hljs-constant">Red</span> <span class="hljs-constant">Hat</span> <span class="hljs-constant">VirtIO</span> <span class="hljs-constant">Ethernet</span> <span class="hljs-constant">Adapter</span>
</span>-<span class="ruby"> <span class="hljs-constant">Serial</span> port <span class="hljs-keyword">for</span> <span class="hljs-symbol">logging:</span> <span class="hljs-constant">COM1</span></span></code></pre><p>安装向导的最后，勾选Run Sysprep和Shutdown，最后点击完成，系统自动关机。</p><p>10.关机完成后镜像已经可用了，不过Cloudbase-init还多是默认配置，可以重新开机virsh start image_name，根据实际需求修改配置，具体参考文档。</p><p>本文例子做了如下修改：打开配置文件C:\Program Files\Cloudbase Solustions\Cloudbase-Init\conf\cloudbase-init.conf，修改如下几项，配置ConfigDrive的方式：</p><pre class="prettyprint"><code class=" hljs ini"><span class="hljs-setting">mtu_use_dhcp_config=<span class="hljs-value"><span class="hljs-keyword">false</span></span></span>
<span class="hljs-setting">ntp_use_dhcp_config=<span class="hljs-value"><span class="hljs-keyword">false</span></span></span>
<span class="hljs-setting">metadata_services=<span class="hljs-value">cloudbaseinit.metadata.services.configdrive.ConfigDriveService</span></span></code></pre><p>11.正常关机，virsh undefine image_name，镜像就制作完成了。</p><p>12.同样的，如果要针对同一个Windows版本安装不同软件，可以使用已有的镜像进行安装。</p><h2>测试镜像</h2><p>如果仅仅使用devstack用于测试镜像，可以将devstack安装在一台虚拟机上，不用时直接关闭，这里的优化可以参考附录：虚拟机性能优化。</p><p><strong>搭建devstack的步骤（如果是安装在虚拟机上同样适用）：</strong></p><p>1.创建stack账号，添加sudo权限，并登录stack：</p><p>adduser stack <br>
echo “stack ALL=(ALL) NOPASSWD: ALL” &gt;&gt; /etc/sudoers <br>
su - stack</p><p>2.安装git：sudo yum install -y git</p><p>3.下载devstack源码：git clone <a href="https://git.openstack.org/openstack-dev/devstack">https://git.openstack.org/openstack-dev/devstack</a>并cd devstack</p><p>4.选定指定的Openstack版本，如：git checkout stable/juno</p><p>5.配置文件~/devstack/local.conf：</p><pre class="prettyprint"><code class=" hljs lua"><span class="hljs-string">[[local|localrc]]</span>
FLOATING_RANGE=<span class="hljs-number">192.168</span><span class="hljs-number">.122</span><span class="hljs-number">.224</span>/<span class="hljs-number">27</span>
FIXED_RANGE=<span class="hljs-number">10.11</span><span class="hljs-number">.12</span><span class="hljs-number">.0</span>/<span class="hljs-number">24</span>
FIXED_NETWORK_SIZE=<span class="hljs-number">256</span>
FLAT_INTERFACE=ens3
ADMIN_PASSWORD=<span class="hljs-number">123</span>
DATABASE_PASSWORD=<span class="hljs-number">123</span>
RABBIT_PASSWORD=<span class="hljs-number">123</span>
SERVICE_PASSWORD=<span class="hljs-number">123</span>
SERVICE_TOKEN=<span class="hljs-number">123</span>
LIBVIRT_TYPE=kvm
LOGFILE=$DEST/logs/stack.sh.log
\# nova相关配置
<span class="hljs-string">[[post-config|$NOVA_CONF]]</span>
[libvirt]
inject_password=<span class="hljs-keyword">true</span>
inject_partition=-<span class="hljs-number">1</span>
cpu_mode=custom
cpu_model=cpu64-rhel6</code></pre><p>6.安装并启动devstack：./stack： <br>
第一次执行时会安装许多库和下载代码</p><p>7.启动完后，为了让Dashboard中创建虚拟机页面支持设置admin密码，需要修改/opt/stack/horizon/openstack_dashboard/local/local_settings.py：</p><pre class="prettyprint"><code class=" hljs php">OPENSTACK_HYPERVISOR_FEATURES = {
<span class="hljs-string">&#039;can_set_mount_point&#039;</span>: <span class="hljs-keyword">False</span>,
<span class="hljs-string">&#039;can_set_password&#039;</span>: <span class="hljs-keyword">True</span>,
}</code></pre><p>8.如果有防火墙，打开80和6080端口：</p><pre class="prettyprint"><code class=" hljs lasso">firewall<span class="hljs-attribute">-cmd</span> <span class="hljs-subst">--</span>add<span class="hljs-attribute">-port</span><span class="hljs-subst">=</span><span class="hljs-number">80</span>/tcp
firewall<span class="hljs-attribute">-cmd</span> <span class="hljs-subst">--</span>add<span class="hljs-attribute">-port</span><span class="hljs-subst">=</span><span class="hljs-number">6080</span>/tcp
firewall<span class="hljs-attribute">-cmd</span> <span class="hljs-subst">--</span>reload</code></pre><p><strong>devstack的使用方式：</strong></p><p>1.确保是以stack用户登录。</p><p>2.进入devstack目录，执行source openrc admin admin，即使用admin身份（密码在配置文件中指定了）操作openstack。</p><p>3.然后就可以使用命令行工具了。 <br>
也可以通过Dashboard（80端口）和VNC（6080）以web界面来操作openstack。如果安装在虚拟机，且虚拟机运行在虚拟子网上，可以通过iptables等工具将虚拟机80和6080端口NAT映射到外网，进而访问。</p><p><strong>具体测试流程：</strong></p><p>1.在devstack机器上，su - stack &amp;&amp; cd devstack &amp;&amp; source openrc admin admin</p><p>2.导入镜像到glance：</p><pre class="prettyprint"><code class=" hljs mel">glance <span class="hljs-keyword">image</span>-create --name image_name --disk-<span class="hljs-keyword">format</span>=qcow2 --<span class="hljs-keyword">container</span>-<span class="hljs-keyword">format</span>=bare --is-public=True --<span class="hljs-keyword">file</span> /path/to/<span class="hljs-keyword">image</span>.qcow2</code></pre><p>3.浏览器打开devstack的80端口，通过horizon界面用刚才导入的镜像创建虚拟机。 <br>
4.测试确保几点：</p><ul>
<li>虚拟机成功创建</li>
<li>-创建操作没有错误日志（通过实例页面的日志Tab查看）</li>
<li>ssh_key或者admin密码正确设置，能够成功登录</li>
<li>登录后，检查之前安装的软件或做的配置</li>
</ul><h2>总结</h2><p>制作虚拟机镜像的方式有很多种，本文介绍了一种直观的方式：通过创建虚拟机，用平时使用操作系统的方式来定制化需求。另外还值得一提的一个工具，Diskimage-builder，可以用于自动化地创建镜像，使得定制化和测试镜像都变得更容易，但是相比本文介绍的方式也有一些不足：一是有一定的学习成本，二是目前只支持部分常用的Linux发行版本。 <br>
测试镜像的方式同样也很多，本文是通过devstack搭建一个最简的Openstack平台环境，把镜像直接导入平台，测试各个操作是否成功，日志是否无异常。</p><hr><h2>附录</h2><p><strong>问题和解决</strong> <br>
<strong><em>制作Windows镜像时，报错无法从CD boot。</em></strong></p><p>这是由于virt-install误把Virtio的ISO文件当做安装盘，解决办法：使用floppy盘的方式安装Virtio驱动：</p><p>1.下载vfd格式的Virtio驱动安装文件。 <br>
2.将–disk path=/path/to/virtio-win-0.1.102.iso,device=cdrom替换为–disk path=/path/to/virtio-win-0.1.102_amd64.vfd,device=floppy</p><p><strong><em>cloud-init工作原理</em></strong></p><p>cloud-init是一系列python脚本和工具，负责云实例最开始的初始化工作（修改主机名、注入ssh-key文件、设置root密码等）。cloud-init是一个通用方案，还适用于Openstack外的多种云平台。</p><p>cloud-init安装在虚拟机中，在第一次启动时，会根据本地配置去获取Datasources。Datasources包含了cloud-init初始化虚拟机时所需的配置数据：来自用户的userdata和来自平台的metadata。通常userdata包含yaml文件、运行脚本等多种格式的文件，而metadata包含了主机名、实例id、显示名等云平台相关的细节。</p><p>云平台提供Datasource的方式很多，Openstack默认的方式是通过http server提供Datasource：虚拟机访问默认的<a href="http://169.254.169.254">http://169.254.169.254</a>，Openstack会对这个地址重定向，最终指向自己的metadata server。</p><p><strong><em>镜像格式</em></strong></p><p>虚拟机镜像格式最简单的是raw格式，可以认为是一个位等价的块设备文件（对/dev/sda使用dd命令进行复制）。此外还有很多格式，各自有不同的特点，如：ISO（主要用于CD或DVD）、VDI（VirtualBox使用）、VHD/VHDX（微软Hyper-V使用）、VMDK（VMware使用）。</p><p>QCOW2（QEMU copy-on-write version 2）则常用于KVM虚拟机，相比raw格式，qcow2格式的文件体积更小，更利于保存和上传。qcow2格式还支持快照（snapshot）功能（raw不支持），因此需要时，Openstack会自动将raw格式的镜像转换成qcow2格式。</p><p><strong><em>虚拟机性能优化</em></strong></p><p>关于虚拟化，先梳理几个概念：</p><ul>
<li>Hardware Virtualization：本文使用的QEMU/KVM就是属于这一类虚拟化，虚拟化出一个硬件平台（硬件机器），在这之上可以跑不同的操作系统（Linux、Windows等）（区别于Operating-system-level Virtualization，虚拟化的实例都是同一个操作系统；也就是Docker那一类的技术。）。Hardware Virtualization又有几种区分： - Full Virtualization：完整地模拟客户操作系统所需的所有硬件。客户操作系统不知道自己是跑在物理机还是虚拟机上 <br>
<img src="http://img.blog.csdn.net/20160122092207745" alt="图片描述" title=""> <br>
-Paravirtualization（“Para-”：“beside”或“alongside”）：为了降低模拟一些硬件的难度，以及避免一些模拟带来的性能消耗，hypervisor（虚拟层）可以提供和底层硬件类似的软件接口。客户操作系统需要做修改或者安装一些驱动来和这些软件接口通信。客户操作系统知道自己是跑在物理机还是虚拟机上。 <br>
<img src="http://img.blog.csdn.net/20160122092254042" alt="图片描述" title=""></li>
<li>Hardware-assisted Virtualization：在物理硬件上提供特性支持（直接虚拟化硬件资源），从而提高Hardware Virtualization的性能和安全性： <br>
–   CPU虚拟化：Intel virtualization (VT-x)或AMD virtualization (AMD-V) <br>
–   I/O虚拟化：Intel VT-d或AMD-Vi <br>
–   内存虚拟化 <br>
–   GPU虚拟化 <br>
–   ……</li>
</ul><p><img src="http://img.blog.csdn.net/20160122092331104" alt="图片描述" title=""> <br>
这些硬件虚拟化特性需要在BIOS中打开。</p><ul>
<li><p>使用KVM <br>
QEMU/KVM创建虚拟机有两种模式emulator（QEMU）和virtualizer（KVM）。其中KVM需要依赖于Hardware-assisted CPU Virtualization（VT-x或者AMD-V），通过在宿主机cpu上执行客户机代码，从而可以获得接近原生的性能。KVM并不支持CPU的paravirtualization，但是支持对设备驱动的paravirtualization从而提高I/O性能。 <br>
使用KVM需要确保CPU硬件支持（要在BIOS中打开）和Linux内核模块支持。</p></li>
<li><p>使用host的cpu model <br>
如果不需要考虑虚拟机的迁移等问题，可以直接对虚拟机暴露全部宿主机的CPU特性（包括硬件虚拟化的特性），从而更好地利用cpu提升性能。相关命令指定–cpu host即可。</p></li>
<li><p>打开KVM-based nested virtualization <br>
为了能够在创建的虚拟机中跑KVM（KVM上跑KVM），需要在物理机上允许KVM-based nested virtualization。对于Intel-based的机器： <br>
•检查nested KVM Kernel是否打开 <br>
cat /sys/module/kvm_intel/parameters/nested <br>
N <br>
Y代表打开，N代表关闭 <br>
•临时移走KVM intel Kernel模块，打开nested virtualization，再重新加载：</p></li>
</ul><pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> rmmod kvm-intel
<span class="hljs-built_in">sudo</span> sh -c <span class="hljs-string">"echo &#039;options kvm-intel nested=y&#039; &gt;&gt; /etc/modprobe.d/dist.conf"</span>
<span class="hljs-built_in">sudo</span> modprobe kvm-intel</code></pre><p>•确保正确打开：</p><pre class="prettyprint"><code class=" hljs oxygene">cat /sys/<span class="hljs-keyword">module</span>/kvm_intel/parameters/<span class="hljs-keyword">nested</span>
Y
modinfo kvm_intel | grep <span class="hljs-keyword">nested</span>
parm:           <span class="hljs-keyword">nested</span>:bool</code></pre><ul>
<li>使用Virtio <br>
因为本文使用libvirt来管理KVM虚拟机，最方便的提升I/O性能的方式就是Virtio（此外还有其他方式提高KVM虚拟机I/O，例如利用VT-d给KVM虚拟机直接分配设备）。 <br>
Virtio是一种paravirtualization，只能运行兼容Virtio的客户机（Linux内核支持，Windows需要安装相关驱动）。Para-virtualized设备列表： <br>
•   network device (virtio-net) <br>
•   block device (virtio-blk) <br>
•   controller device (virtio-scsi) <br>
•   serial device (virtio-serial) <br>
•   balloon device (virtio-balloon)</li>
</ul><p>相关命令指定virtio模式即可。</p><p><strong>作者简介</strong>：蔡凯捷，现就职于<a href="http://www.gstarcloud.com/"><strong>绿星云科技</strong></a>，高级工程师，负责Openstack相关领域的研发工作。爱好云计算、开源项目、Web相关话题。曾任腾讯基础架构部门研发工程师，拥有互联网分布式系统多年研发经验。绿星云科技(深圳)有限公司（www.gstarcloud.com）是一家迅速崛起的互联网公司，专注于公有云服务。基于不断创新的软硬件平台架构、高效的运营管理流程和热情高涨的事业心，为客户打造易用、可靠、高性价比的云计算服务平台。该平台集中了弹性计算、分布式块存储和软件定义网络(SDN)等IaaS核心技术和能力，以秒级部署、在线迁移、分布式数据库、CDN加速等功能，为用户提供一站式云计算服务。本文为绿星云科技独家供稿，已得到官方的独家授权发布。</p><blockquote>
  <p>责编：魏伟，关注OpenStack。欢迎技术文章投稿，投稿邮箱weiwei@csdn.net</p>
</blockquote>            </div>
<!--            <div class="text-center show_more"><i class="fa fa-angle-down"></i></div>-->
		</div>
				<div class="footer_bar clearfix">
			<div class="pull-left">
				<a href="http://geek.csdn.net/user/publishlist/karamos" target="_blank">
					<img class="avatar" src="http://avatar.csdn.net/4/0/1/2_karamos.jpg">
				</a>
                <a class="user_name" href="http://geek.csdn.net/user/publishlist/karamos" target="_blank">karamos</a>

				发布于<a forumid="136" href="http://geek.csdn.net/forum/136" target="_blank" class="forum_name forum_for_cmmde">OpenStack</a>
                <span class="time">2016-01-22 09:23</span>
            </div>
			<div class="pull-right hidden-xs">
				<span class="share">分享到：
                    <span class="bdsharebuttonbox">
                        <a class="bds_tsina" data-cmd="tsina"></a>
                        <a class="bds_weixin" data-cmd="weixin"></a>
                    </span>
                </span>
				<script>

                    window._bd_share_config={
                        "common":{
                            "bdSnsKey":{
                                "tsina":"http://geek.csdn.net",
                                "tqq":"来自极客头条",
                                "tweixin":"来自极客头条"
                            },
                            "bdText":"Openstack虚拟机镜像深度实践（来自 @极客头条 ）",
                            "bdMini":"2",
                            "bdMiniList":false,
                            "bdPic":"http://img.my.csdn.net/awG5LZABlv143523199429.jpg?imageView2/2/w/160",
                            "bdStyle":"2",
                            "bdSize":"32"
                        },
                        "share":{}
                    };
                    with(document)0[(getElementsByClassName('footer_bar')[0]).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];



				</script>
			</div>
		</div>
		<!--<div class="ad_small">
            <dl>
                <dt>
                    <img src="/assets/images/csdn_logo.png"/>
                    <p>CSDN App<br/>随时随地看头条！</p>
                </dt>
                <dd>
                    <a href="http://ms.csdn.net/download.html" class="down_app">下载App</a>
                    <img src="/assets/images/ad_close.png" class="ad_close"/>
                </dd>
            </dl>
        </div>
        <div class="ad">
            <img class="ad_img" src="/assets/images/app.jpg" border="0"/>
            <a class="ad_ios" href="https://itunes.apple.com/app/csdn-guan-fang/id952943888"><img src="/assets/images/ios.png"/></a>
            <a class="ad_android" href="http://csdn-app.csdn.net/csdn.apk"><img src="/assets/images/android.png"/></a>
        </div>
        <script>
            $(function()
            {
                $(".ad_close").on("click",function()
                {
                    $(this).parents(".ad_small").hide(300);
                })
            })
        </script>-->

        <!--详情页面广告 2015-12-15 11:08-->
        <div class="detail_ad">
	<script type="text/javascript">
		document.write('<script type="text/javascript" ads-src="http://csdnim.qtmojo.com/main/s?user=csdn|geek_newsdetail|banner3&db=csdnim&border=0&local=yes&js=ie" src=" http://creatim.qtmojo.cn/td/AllyesDeliver.min.js" charset="gbk"></'+'script>');
	</script>
	<!--<a href="#"><img src="/assets/images/detail_ad.jpg"/></a>-->
</div>
    
		<div class="reply_news_btn">
            <span class="reply reply_news start_cmmde btn btn-primary btn-sm" data-target="comment_news" title="评论：Openstack虚拟机镜像深度实践">评论</span>
		</div>

        <div id="comments" class="csdn_comments">
        </div>
        <div class="cmmde_bg close"></div>
</div>
		        		<script type="text/javascript">
		    //var path = location.protocol +"//"+ location.host+"/comments/";                 //本地测试需要配置一个csdn.net的子域名，以便登录，例:http://comments.csdn.net
		    var path = "http://ptcms.csdn.net/comment";
                new csdn.comments({
                    id: "comments",                                                                  //容器ID
                    path: path,
                    datapath: "http://ptcms.csdn.net",                                          //数据接口host
                    cssUrl: "/assets/css/comments.css",                                                 //css地址
                    //loginUrl:path+"/js/login.js",                  //login.js地址
                    loginUrl: "https://passport.csdn.net/content/loginbox/login.js",
                    //articleURL:"http://geek.csdn.net/news/detail/52407",
                    //articleURL: "http://geek.csdn.net/news/detail/52407",
                    articleURL: "http://geek.csdn.net/news/detail/52407",
                    title: "Openstack%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%95%9C%E5%83%8F%E6%B7%B1%E5%BA%A6%E5%AE%9E%E8%B7%B5",
                    md5: "http://static.blog.csdn.net/scripts/md5.js",                               //用于计算用户头像的md5.js地址
                    componentsUrl: path + "/js/componet.js",              //CSDN通用组件地址
                    toolkitUrl: path + "/js/toolkit.js",                  //CSDN工具包地址
                    tab: {                                                                           //【通用组件】tab
                        id: "csdnTab",                                                               //容器ID
                        highlight: "hover"                                                           //表示当前选择的CSS样式名
                    },
                    pagination: {                                                                    //【通用组件】AJAX分页组件
                        pagesize: 10,                                                                //每页多少条数据
                        showpages: 10                                                                //显示多少页
                    },
                    oncountchange: function (count) {                                                  //评论数chagnge回调
                        var el = document.getElementById('remark_count1');
                        if (el) {
                            el.innerHTML = count
                        }
                    }
                });
		</script>

		
		

<script type="text/javascript">
$(document).ready(function(){
    //正文折叠
//    var _nd = $('.news_description .description').height();
//    if(_nd > 220){
//        $('.news_description').addClass('mini open');
//    }

//    $('.show_more').click(function(){
//        $('.news_description').toggleClass('open');
//    });

	//这里是置顶和取消置顶事件
    $('.fa-arrow-circle-up,.fa-arrow-circle-down').click(function(){
    	var type = $(this).hasClass('fa-arrow-circle-up') ? 1 : 0;
        var news_id = $(this).parent().attr('id');
        var item = $(this);
                url = 'http://geek.csdn.net/news/do_top?jsonpcallback=?';
                $.getJSON(url,
                {'id':news_id,'type':type},function(data){
                    if(data.success){
                    	if(type)
                    	{
                    		item.removeClass('fa-arrow-circle-up').addClass('fa-arrow-circle-down').attr('data-original-title','取消置顶');
                            $('.tooltip-inner').text('取消置顶');
                    	}
                    	else
                    	{
                    		item.removeClass('fa-arrow-circle-down').addClass('fa-arrow-circle-up').attr('data-original-title','置顶');
                            $('.tooltip-inner').text('置顶');
                    	}
                    }
                    else
					{
                        alert(data.msg);
                    }
        },'json');
    });
    $('.fa-trash-o').click(function(){
        if(confirm("您确定删除吗？")){
    	var news_id = $(this).parent().attr('id');
                url = 'http://geek.csdn.net/news/do_del?jsonpcallback=?';
                $.getJSON(url,
            {'id':news_id},function(data){
                if(data.success > 0){
                    window.location.href="http://geek.csdn.net/newest";
                }
                else
                {
                    alert(data.msg);
                }
        },'json');
        }else{
			return false;
        }
    });
});
</script>

</div>

<ul class="scrolltop_bar list-unstyled data-offset-top" data-spy="affix" data-offset-top="250">
    <li class="new_share" title="分享">
        <div class="bdsharebuttonbox hover_show">
            <a class="bds_tsina" data-cmd="tsina"></a>
            <a class="bds_weixin" data-cmd="weixin"></a>
        </div>
        <a class="btn hover_hide"> <i class="fa fa-share-alt"></i></a>
    </li>
    <li class="new_comment">
        <a class="start_cmmde btn" data-target="comment_news"><span>添加评论</span><i class="fa fa-comments"></i></a>
    </li>
    <li class="new_geek">
        <a data-target="geek_link" class="start_cmmde btn"><span>发布链接</span><i class="fa fa-link"></i></a>
    </li>
    <li class="new_geek">
        <a data-target="geek_new" class="start_cmmde btn"><span>发布图文</span><i class="fa fa-file-text-o"></i></a>
    </li>
    <li class="js-scroll-top">
        <a class="btn"><span>返回顶部</span><i class="fa fa-arrow-up"></i></a>
    </li>
    <li class="js-list-top">
        <a class="btn"><span>返回顶部</span><i class="fa fa-arrow-up"></i></a>
    </li>
</ul>

    <script id="noticeScript" type="text/javascript" btnid="header_notice_num" wrapid="note1" count="5" subcount="5" src="//csdnimg.cn/rabbit/notev2/js/notify.js?9d86d94"></script>
    <script src="http://c.csdnimg.cn/public/common/toolbar/js/toolbar.js"></script>

<script src="/assets/js/csdntags.min.js"></script>
<script>

    document.domain = "csdn.net";
    //var postsite = "http://test.geek.csdn.net";
    var postsite = "http://geek.csdn.net";
    var img_upload_url = "http://write.blog.csdn.net/article/UploadImgMarkdown?parenthost=write.blog.csdn.net";

    window.baseDir = '/assets/res';
    if (!/(\?|&)debug($|&)/.test(location.search)) {
        window.baseDir += '-min';
    }
    window.require = {
        baseUrl: window.baseDir,
        deps: ['main']
    };
</script>
<script src="/assets/res-min/require.js"></script>
<script>
    $(document).ready(function(){
        $('body').delegate('.news_vote .fa', 'click', function(){
            var $vote_item = $(this).parent('.news_vote'),
                datatype = $(this).attr('datatype'),
                votestatus;
            if(datatype == "up"){
                votestatus = 1;
            }else if(datatype == "down"){
                votestatus = 2;
            }
            news_id = $vote_item.attr('voteid');
            disabled = $vote_item.hasClass('disabled');
            loading = $vote_item.hasClass('vote_loading');
            if(disabled || loading){
                return;
            }
            $vote_item.addClass('vote_loading');
                        url = 'http://ptcms.csdn.net/like/like/do_like?jsonpcallback=?';
            
            $.getJSON(url,
                {'article_id':news_id,'status':votestatus,'domain':'geek.csdn.net'},function(data){
                    if(data.succ > 0){
                        //console.log(data);
                        $vote_item = $('[voteid="'+ news_id +'"]');
                        $vote_item.find('.count').text(data.info.ding-data.info.cai);
                        $vote_item.removeClass('isdown isup');
                        if(data.status == 1){
                            $vote_item.addClass('isup');
                            $('[data-counts="vote"]').each(function(){
                                $(this).text(parseInt($(this).text()) + 1);
                            });
                        }else if(data.status == 2){
                            $vote_item.addClass('isdown');
                            if(data.origin_status == 1){
                                $('[data-counts="vote"]').each(function(){
                                    $(this).text(parseInt($(this).text()) - 1);
                                });
                            }
                        }else if(data.status == -1 && data.origin_status == 1){
                            $('[data-counts="vote"]').each(function(){
                                $(this).text(parseInt($(this).text()) - 1);
                            });

                        }
                    }
                    if(data.succ == -2){
                        alert(data.msg);
                        window.location.href='https://passport.csdn.net/account/login';
                    }
                    if(data.succ == -1){
                        alert(data.msg);
                    }
                    $vote_item.removeClass('vote_loading');
                },'json');

        });

    });

</script>
<script src="http://static.blog.csdn.net/scripts/cnick.js?v=1.1"></script>


<div class="cmmde close"><div id="csdnEditorB" class="cmmde_box"></div></div>

<script src="//csdnimg.cn/pubfooter/js/tracking.js?fe68e58"></script>
<script src="http://csdnimg.cn/pubfooter/js/repoAddr2.js?v=0.4674630036781866"></script>
<script src="//csdnimg.cn/rabbit/tracking-ad/main.js?75eacd6"></script>

</body>
</html>	
<script type="text/javascript" src="http://static.blog.csdn.net/public/res/bower-libs/MathJax/MathJax.js?config=TeX-AMS_HTML"></script>

